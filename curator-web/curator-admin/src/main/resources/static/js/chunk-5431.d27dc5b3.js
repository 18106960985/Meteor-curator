(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5431"],{"6A9V":function(t,e,a){"use strict";a.r(e);var i=a("QbLZ"),n=a.n(i),o=a("L2JU"),r=a("gDS+"),s=a.n(r),l=a("P2sY"),d=a.n(l),c={name:"Sticky",props:{stickyTop:{type:Number,default:0},zIndex:{type:Number,default:1},className:{type:String,default:""}},data:function(){return{active:!1,position:"",width:void 0,height:void 0,isSticky:!1}},mounted:function(){this.height=this.$el.getBoundingClientRect().height,window.addEventListener("scroll",this.handleScroll),window.addEventListener("resize",this.handleReize)},activated:function(){this.handleScroll()},destroyed:function(){window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.handleReize)},methods:{sticky:function(){this.active||(this.position="fixed",this.active=!0,this.width=this.width+"px",this.isSticky=!0)},reset:function(){this.active&&(this.position="",this.width="auto",this.active=!1,this.isSticky=!1)},handleScroll:function(){this.width=this.$el.getBoundingClientRect().width,this.$el.getBoundingClientRect().top<this.stickyTop?this.sticky():this.reset()},handleReize:function(){this.isSticky&&(this.width=this.$el.getBoundingClientRect().width+"px")}}},u=a("KHd+"),p=Object(u.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{style:{height:t.height+"px",zIndex:t.zIndex}},[a("div",{class:t.className,style:{top:t.stickyTop+"px",zIndex:t.zIndex,position:t.position,width:t.width,height:t.height+"px"}},[t._t("default",[a("div",[t._v("sticky")])])],2)])},[],!1,null,null,null);p.options.__file="index.vue";var h=p.exports,f=(a("8iP5"),Object(u.a)({},function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"github-corner",attrs:{href:"https://github.com/18106960985/meteor-curator",target:"_blank","aria-label":"View source on Github"}},[e("svg",{staticStyle:{fill:"#40c9c6",color:"#fff"},attrs:{width:"80",height:"80",viewBox:"0 0 250 250","aria-hidden":"true"}},[e("path",{attrs:{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}}),this._v(" "),e("path",{staticClass:"octo-arm",staticStyle:{"transform-origin":"130px 106px"},attrs:{d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor"}}),this._v(" "),e("path",{staticClass:"octo-body",attrs:{d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor"}})])])},[],!1,null,"569c7e5b",null));f.options.__file="index.vue";var g=f.exports,m={data:function(){return{loading:!1,data:null}},methods:{generateDate:function(t){this.$emit("on-selected-file",t)},handleDrop:function(t){t.stopPropagation(),t.preventDefault();var e=t.dataTransfer.files;if(1===e.length){var a=e[0];this.readerData(a),t.stopPropagation(),t.preventDefault()}else this.$message.error("Only support uploading one file!")},handleDragover:function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},handleUpload:function(){document.getElementById("excel-upload-input").click()},handkeFileChange:function(t){var e=t.target.files[0];e&&(this.readerData(e),this.$refs["excel-upload-input"].value=null)},readerData:function(t){var e=this,a=new FileReader;a.onload=function(t){var a=t.target.result;e.generateDate(a)},a.readAsText(t,"utf-8")},fixdata:function(t){for(var e="",a=0,i=10240;a<t.byteLength/i;++a)e+=String.fromCharCode.apply(null,new Uint8Array(t.slice(a*i,a*i+i)));return e+=String.fromCharCode.apply(null,new Uint8Array(t.slice(a*i)))}}},v=(a("xSvu"),Object(u.a)(m,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("input",{ref:"excel-upload-input",staticClass:"c-hide",attrs:{id:"excel-upload-input",type:"file",accept:".text, .txt"},on:{change:t.handkeFileChange}}),t._v(" "),a("div",{attrs:{id:"drop"},on:{drop:t.handleDrop,dragover:t.handleDragover,dragenter:t.handleDragover}},[t._v("\n    Drop excel file here or\n    "),a("el-button",{staticStyle:{"margin-left":"16px"},attrs:{size:"mini",type:"primary"},on:{click:t.handleUpload}},[t._v("browse")])],1)])},[],!1,null,"d42debb6",null));v.options.__file="UploadTxt.vue";var b=v.exports,_=a("Kw5r"),y=a("Ddwv"),x=a.n(y);function w(t,e){var a=new x.a(e.target,{text:function(){return t}});a.on("success",function(){_.default.prototype.$message({message:"Copy successfully",type:"success",duration:1500}),a.off("error"),a.off("success"),a.destroy()}),a.on("error",function(){_.default.prototype.$message({message:"Copy failed",type:"error"}),a.off("error"),a.off("success"),a.destroy()}),a.onClick(e)}var $=a("Ddwv");if(!$)throw new Error("you should npm install `clipboard` --save at first ");var C={bind:function(t,e){if("success"===e.arg)t._v_clipboard_success=e.value;else if("error"===e.arg)t._v_clipboard_error=e.value;else{var a=new $(t,{text:function(){return e.value},action:function(){return"cut"===e.arg?"cut":"copy"}});a.on("success",function(e){var a=t._v_clipboard_success;a&&a(e)}),a.on("error",function(e){var a=t._v_clipboard_error;a&&a(e)}),t._v_clipboard=a}},update:function(t,e){"success"===e.arg?t._v_clipboard_success=e.value:"error"===e.arg?t._v_clipboard_error=e.value:(t._v_clipboard.text=function(){return e.value},t._v_clipboard.action=function(){return"cut"===e.arg?"cut":"copy"})},unbind:function(t,e){"success"===e.arg?delete t._v_clipboard_success:"error"===e.arg?delete t._v_clipboard_error:(t._v_clipboard.destroy(),delete t._v_clipboard)}},S=function(t){t.directive("Clipboard",C)};window.Vue&&(window.clipboard=C,Vue.use(S)),C.install=S;var L=C,k=a("t3Un"),P="zk";function T(t,e){return Object(k.a)({url:P+"/setData",method:"post",params:{path:t,data:e}})}a("MnM9");var D=1e3,R={parentPath:"/",path:void 0,data:void 0},O={name:"zookeeper-index",props:{authortiy:{type:Object,default:function(){return{btn_add:{type:Boolean,default:!0},btn_edit:{type:Boolean,default:!0},btn_del:{type:Boolean,default:!0}}}}},directives:{clipboard:L},components:{UploadTxtComponent:b,GithubCorner:g,Sticky:h},data:function(){return{ZK_SERVERS:void 0,ROOT_PATH:void 0,status:"edit",fiterls:"",treeData:[],defaultProps:{children:"childs",label:"path"},curNodeData:void 0,form:d()({},R),loading:{loading:!1,treeLoading:!1,submitLoading:!1,formLoading:!1,loadLoding:!1},show:{uploadSubimt:!1},dialog:{uploadTxt:!1},upload:{data:null,childs:[]},download:{data:null}}},created:function(){this.getTree()},watch:{fiterls:function(t){this.$refs.treeData.filter(t)}},filter:{labelConvert:function(t){return t.length,t}},methods:{getTree:function(){var t=this;this.loading.treeLoading=!0,this.loading.submitLoading=!0,function(t){return Object(k.a)({url:P+"/tree",method:"get",params:{path:t}})}().then(function(e){t.ZK_SERVERS=e.data.data.curServsers,t.ROOT_PATH=e.data.data.ROOT+"/",t.download.data=e.data.data.ZKNode;var a=t.download.data.childs;t.treeData=a,t.loading.treeLoading=!1,t.loading.submitLoading=!1})},filterNode:function(t,e){return!t||-1!==e.path.indexOf(t)},renderContent:function(t,e){var a=this,i=e.node,n=e.data;e.store;return t("span",{style:"flex: 1; display: flex; align-items: center; justify-content: space-between; font-size: 14px; padding-right: 8px;"},[t("span",{on:{click:function(){return a.treeUpdate(i,n)}},style:"width: 100%;"},[i.label.length>25?i.label.substring(0,25)+"……":i.label]),t("span",null,[this.authortiy.btn_add?t("el-button",{style:"font-size: 15px;",attrs:{type:"text",icon:"el-icon-circle-plus"},on:{click:function(){return a.treeCreated(i,n)}}},[]):t("span",null,[]),this.authortiy.btn_del?t("el-button",{style:"font-size: 15px;",attrs:{type:"text",icon:"el-icon-remove"},on:{click:function(){return a.treeDelelte(i,n)}}},[]):t("span",null,[])])])},treeCreated:function(t,e){this.form=d()({},R),t.parent.data.fullPath?this.form.parentPath=t.parent.data.fullPath+"/"+e.path+"/":this.form.parentPath=this.ROOT_PATH+e.path+"/",this.status="create",this.curNodeData=e},treeUpdate:function(t,e){var a=this;this.loading.formLoading=!0,function(t){return Object(k.a)({url:P+"/getData",method:"get",params:{path:t}})}(e.fullPath).then(function(i){a.loading.formLoading=!1,i.data&&(a.status="edit",t.parent.data.fullPath?a.form.parentPath=t.parent.data.fullPath+"/":a.form.parentPath=a.ROOT_PATH,a.form.path=e.path,a.form.data=i.data.data)})},addRootNode:function(){this.form=d()({},R),this.form.parentPath=this.ROOT_PATH,this.status="create"},handleCreate:function(){var t=this;if(this.form.path){var e=this.completePath(),a=this.form.data;this.loading.submitLoading=!0,this.loading.formLoading=!0,T(e,a).then(function(a){if(a.data.rel)if(t.$notify({title:t.$t("notify.title.success"),message:t.$t("notify.message.create.success"),type:"success"}),t.form.parentPath!=t.ROOT_PATH){t.status="edit",t.loading.treeLoading=!0;var i={id:D++,path:t.form.path,fullPath:e,childs:[]};t.curNodeData.childs||t.$set(t.curNodeData,"childs",[]),t.curNodeData.childs.push(i),t.loading.treeLoading=!1}else t.getTree();t.loading.formLoading=!1,t.loading.submitLoading=!1})}else this.$message.error("path is not null")},hadnleUpdate:function(){var t=this;this.form.path?(this.loading.submitLoading=!0,this.loading.formLoading=!0,T(this.completePath(),this.form.data).then(function(e){200==e.status&&t.$notify({title:t.$t("notify.title.success"),message:t.$t("notify.message.update.success"),type:"success"}),t.loading.formLoading=!1,t.loading.submitLoading=!1})):this.$message.error("path is not null")},treeDelelte:function(t,e){var a=this;this.$confirm(this.$t("confirm.message.treeDelete"),this.$t("confirm.title.prompt"),{confirmButtonText:this.$t("confirm.button.confim"),cancelButtonText:this.$t("confirm.button.cancel")}).then(function(){a.loading.treeLoading=!0,function(t){return Object(k.a)({url:P+"/remove",method:"delete",params:{path:t}})}(e.fullPath).then(function(i){if(200==i.status){a.$notify({title:a.$t("notify.title.success"),message:a.$t("notify.message.delete.success"),type:"success"});var n=t.parent,o=n.data.childs||n.data,r=o.findIndex(function(t){return t.path===e.path});o.splice(r,1)}a.loading.treeLoading=!1})})},convertServer:function(){var t=this;this.$prompt(this.$t("confirm.message.switchServer"),this.$t("confirm.title.prompt"),{confirmButtonText:this.$t("confirm.button.confirm"),cancelButtonText:this.$t("confirm.button.cancel"),inputValue:this.ZK_SERVERS}).then(function(e){(function(t){var e=new URLSearchParams;return e.append("server",t),k.a.post(P+"servers",e)})(e.value).then(function(e){e.data.rel?(t.$notify({title:t.$t("notify.title.success"),message:t.$t("notify.message.switch.success"),type:"success"}),t.getTree()):t.$notify({title:t.$t("notify.title.success"),message:e.data.message,type:"error"})})})},handleCopy:function(t,e){w(t,e)},clipboardSuccess:function(){this.$message({message:this.$t("message.copy"),type:"success",duration:1500})},completePath:function(){return this.form.parentPath+this.form.path},handDownLoad:function(){var t=s()(this.download.data),e=new Blob([t],{type:"text/plain;charset=utf-8"});saveAs(e,this.ZK_SERVERS+"-ZNodeData.txt")},handUpload:function(t){this.upload.data=JSON.parse(t),this.upload.childs=this.upload.data.childs,this.show.uploadSubimt=!0},importZKNode:function(){var t=this;this.loading.loading=!0,function(t){return Object(k.a)({url:P+"/import",method:"post",data:t})}(this.upload.data).then(function(e){e.data.rel&&(t.loading.loading=!1,t.dialog.uploadTxt=!1,t.$notify({title:t.$t("notify.title.success"),message:t.$t("notify.message。upload.success"),type:"success"}),t.getTree())}).catch(function(e){t.loading.loading=!1})}}},E=(a("cvoP"),Object(u.a)(O,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container calendar-list-container"},[a("el-row",[a("github-corner",{staticStyle:{position:"absolute",top:"0px",border:"0",right:"0"}}),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"use-flex"},[a("div",[a("el-input",{staticClass:"filter-item",attrs:{size:"medium",placeholder:t.$t("placeholder.pathFilter")},model:{value:t.fiterls,callback:function(e){t.fiterls=e},expression:"fiterls"}})],1),t._v(" "),a("div",[t.authortiy.btn_add?a("el-button-group",[a("el-button",{attrs:{type:"primary"},on:{click:t.handDownLoad}},[t._v(t._s(t.$t("button.export")))]),t._v(" "),a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.dialog.uploadTxt,expression:"dialog.uploadTxt"}],attrs:{type:"primary"},on:{click:function(e){t.dialog.uploadTxt=!0,t.upload.data=null,t.uploadSubimt=!1}}},[t._v(t._s(t.$t("button.import")))]),t._v(" "),a("el-tooltip",{attrs:{effect:"light",placement:"top",content:t.$t("tooltip.switchServer")}},[a("el-button",{attrs:{type:"warning"},on:{click:t.convertServer}},[t._v(t._s(t.$t("button.switch")))])],1),t._v(" "),a("el-tooltip",{attrs:{effect:"light",placement:"top",content:t.$t("tooltip.addRootNode")}},[a("el-button",{attrs:{type:"success"},on:{click:t.addRootNode}},[t._v(t._s(t.$t("button.addRoot")))])],1)],1):t._e()],1)]),t._v(" "),a("el-card",{staticStyle:{"margin-right":"10px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("SERVERS：  "),a("b",{staticStyle:{color:"red"}},[t._v(t._s(t.ZK_SERVERS?t.ZK_SERVERS:t.$t("loading.default")))])])]),t._v(" "),a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.treeLoading,expression:"loading.treeLoading"}],ref:"treeData",attrs:{data:t.treeData,"node-key":"id","highlight-current":"",props:t.defaultProps,"expand-on-click-node":!1,"render-after-expand":"",accordion:"","filter-node-method":t.filterNode,"element-loading-text":t.$t("loading.tree"),"element-loading-spinner":"el-icon-loading","render-content":t.renderContent}})],1)],1),t._v(" "),a("el-col",{attrs:{span:16}},[a("sticky",[a("el-card",{staticStyle:{height:"100%"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.$t("constants.formStatus."+t.status)))])]),t._v(" "),a("keep-alive",[a("div",[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.formLoading,expression:"loading.formLoading"}],attrs:{"label-position":"left","label-width":"80px"},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}},[a("el-form-item",{attrs:{label:t.$t("form.label.path")}},[a("el-input",{attrs:{disabled:"edit"==t.status},model:{value:t.form.path,callback:function(e){t.$set(t.form,"path",e)},expression:"form.path"}},[a("template",{slot:"prepend"},[t._v(t._s(t.form.parentPath))]),t._v(" "),a("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.form.parentPath+t.form.path,expression:"form.parentPath +form.path",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.clipboardSuccess,expression:"clipboardSuccess",arg:"success"}],attrs:{slot:"append",type:"primary",icon:"document"},slot:"append"},[t._v("copy")])],2)],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("form.label.data")}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.data,expression:"form.data"}],staticStyle:{height:"400px"},domProps:{value:t.form.data},on:{input:function(e){e.target.composing||t.$set(t.form,"data",e.target.value)}}})]),t._v(" "),a("el-form-item",[t.authortiy.btn_edit?a("el-tooltip",{attrs:{effect:"light",placement:"top",content:t.$t("constants.formStatus."+t.status)}},[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.submitLoading,expression:"loading.submitLoading"}],attrs:{type:"primary"},on:{click:function(e){"create"==t.status?t.handleCreate():t.hadnleUpdate()}}},[t._v(t._s(t.$t("constants.formStatus."+t.status)))])],1):t._e()],1)],1)],1)])],1)],1)],1)],1),t._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading.loading,expression:"loading.loading"}],attrs:{title:t.$t("dialog.title.importConfig"),visible:t.dialog.uploadTxt},on:{"update:visible":function(e){t.$set(t.dialog,"uploadTxt",e)}}},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"app-container"},[a("el-card",{staticStyle:{"margin-right":"10px"}},[a("el-tree",{ref:"uploadData",attrs:{data:t.upload.childs,"node-key":"id","highlight-current":"",props:t.defaultProps,"render-after-expand":"",accordion:"","element-loading-text":t.$t("loading.tree"),"element-loading-spinner":"el-icon-loading"}})],1)],1)]),t._v(" "),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"app-container"},[a("upload-txt-component",{on:{"on-selected-file":t.handUpload}})],1)])],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialog.uploadTxt=!1}}},[t._v(t._s(t.$t("button.cancel")))]),t._v(" "),t.show.uploadSubimt?a("el-button",{attrs:{type:"primary"},on:{click:t.importZKNode}},[t._v(t._s(t.$t("button.upload")))]):t._e()],1)],1)],1)},[],!1,null,"4ca92a7b",null));E.options.__file="index.vue";var N={name:"meteor-curator-index",components:{zookeeper:E.exports},data:function(){return{authortiy:void 0}},computed:n()({},Object(o.b)(["roles"])),created:function(){this.roles.includes("admin")||(console.log(this.roles),this.authortiy={btn_add:!1,btn_edit:!1,btn_del:!1})}},z=(a("x5rF"),Object(u.a)(N,function(){var t=this.$createElement;return(this._self._c||t)("zookeeper",{attrs:{authortiy:this.authortiy}})},[],!1,null,"4381b1d6",null));z.options.__file="index.vue";e.default=z.exports},"8iP5":function(t,e,a){"use strict";var i=a("P3rq");a.n(i).a},LM21:function(t,e,a){},Lm6A:function(t,e,a){},P3rq:function(t,e,a){},cvoP:function(t,e,a){"use strict";var i=a("LM21");a.n(i).a},u2EA:function(t,e,a){},x5rF:function(t,e,a){"use strict";var i=a("Lm6A");a.n(i).a},xSvu:function(t,e,a){"use strict";var i=a("u2EA");a.n(i).a}}]);